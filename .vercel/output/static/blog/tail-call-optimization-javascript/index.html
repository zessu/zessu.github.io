<!DOCTYPE html><html lang="en" data-astro-cid-bvzihdzo> <head><script type="module" src="/_astro/BlogPost.astro_astro_type_script_index_0_lang.VZXdc8kb.js"></script><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="preload" href="/_astro/twinkle-star-latin-400-normal.CutCPZrC.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="/_astro/geist-latin-wght-normal.Dm3htQBi.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="/_astro/roboto-mono-latin-wght-normal.CZtBPCCa.woff2" as="font" type="font/woff2" crossorigin><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v5.16.5"><!-- Canonical URL --><link rel="canonical" href="https://drew.is-a.dev/blog/tail-call-optimization-javascript/"><!-- Primary Meta Tags --><title>Tail Call Optimization Javascript</title><meta name="title" content="Tail Call Optimization Javascript"><meta name="description" content="Tail Call Optimization Javascript"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://zessu.github.io/"><meta property="og:title" content="Tail Call Optimization Javascript"><meta property="og:description" content="Tail Call Optimization Javascript"><meta property="og:image" content="https://drew.is-a.dev/blog-placeholder-1.jpg"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://x.com/amackzie"><meta property="twitter:title" content="Tail Call Optimization Javascript"><meta property="twitter:description" content="Tail Call Optimization Javascript"><meta property="twitter:image" content="https://drew.is-a.dev/blog-placeholder-1.jpg"><script>
    if (localStorage.getItem('darkmode')) {
        document.documentElement.classList.add('darkmode');
    }
</script><link rel="stylesheet" href="/_astro/_slug_.VBcr8UrD.css">
<style>.Btn[data-astro-cid-bvzihdzo]{height:25px;display:flex;align-items:center;justify-content:space-between;border:none;border-radius:5px;overflow:hidden;box-shadow:5px 5px 10px #00000017;cursor:pointer;background-color:transparent;padding:0}.leftContainer[data-astro-cid-bvzihdzo]{height:100%;background-color:#e00;display:flex;align-items:center;justify-content:center;padding:10px;gap:8px}.leftContainer[data-astro-cid-bvzihdzo] .like[data-astro-cid-bvzihdzo]{color:#fff;font-weight:600}.count[data-astro-cid-bvzihdzo]{height:100%;display:flex;align-items:center;justify-content:center;font-weight:600;position:relative;background-color:#fff;padding:5px;color:#e00}.Btn[data-astro-cid-bvzihdzo]:hover .leftContainer[data-astro-cid-bvzihdzo]{background-color:#db0000}.Btn[data-astro-cid-bvzihdzo]:active .leftContainer[data-astro-cid-bvzihdzo]{background-color:#c90000}.Btn[data-astro-cid-bvzihdzo]:active .leftContainer[data-astro-cid-bvzihdzo] svg[data-astro-cid-bvzihdzo]{transform:scale(1.15);transform-origin:top}div[data-astro-cid-bvzihdzo]#like-container{display:flex;align-items:center;justify-content:center}.hero-image[data-astro-cid-bvzihdzo]{width:100%}.hero-image[data-astro-cid-bvzihdzo] img[data-astro-cid-bvzihdzo]{display:block;border-radius:12px;box-shadow:var(--box-shadow)}.prose[data-astro-cid-bvzihdzo]{color:var(--fontColor)}.title[data-astro-cid-bvzihdzo]{margin-bottom:1em;text-align:center}.date[data-astro-cid-bvzihdzo]{margin-bottom:.5em;color:var(--gray)}.last-updated-on[data-astro-cid-bvzihdzo]{font-style:italic}#sf-reading-progress-bar[data-astro-cid-bvzihdzo]{position:fixed;top:0;left:0;z-index:9999;width:0%;height:5px;background-color:#46a787;margin:0}
</style><script type="module" src="/_astro/page.Cungvx1b.js"></script></head> <body class="" data-astro-cid-bvzihdzo> <header data-astro-cid-3ef6ksr2> <nav data-astro-cid-3ef6ksr2> <div data-astro-cid-3ef6ksr2> <span id="name" data-astro-cid-3ef6ksr2>Andrew Makenzi</span> </div> <div class="internal-links" data-astro-cid-3ef6ksr2> <div data-astro-cid-3ef6ksr2> <a href="/" data-astro-cid-3ef6ksr2="true" class="mb-0 p-0"> <svg viewBox="0 0 24 24" fill="none" height="35px" width="35px" xmlns="httpwww.w3.org/2000/svg" data-astro-cid-3ef6ksr2><g id="SVGRepo_bgCarrier" stroke-width="0" data-astro-cid-3ef6ksr2></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-3ef6ksr2></g><g id="SVGRepo_iconCarrier" data-astro-cid-3ef6ksr2> <path d="M22 22L2 22" stroke="var(--logoColor)" stroke-width="1.5" stroke-linecap="round" data-astro-cid-3ef6ksr2></path> <path d="M2 11L6.06296 7.74968M22 11L13.8741 4.49931C12.7784 3.62279 11.2216 3.62279 10.1259 4.49931L9.34398 5.12486" stroke="var(--logoColor)" stroke-width="1.5" stroke-linecap="round" data-astro-cid-3ef6ksr2></path> <path d="M15.5 5.5V3.5C15.5 3.22386 15.7239 3 16 3H18.5C18.7761 3 19 3.22386 19 3.5V8.5" stroke="var(--logoColor)" stroke-width="1.5" stroke-linecap="round" data-astro-cid-3ef6ksr2></path> <path d="M4 22V9.5" stroke="var(--logoColor)" stroke-width="1.5" stroke-linecap="round" data-astro-cid-3ef6ksr2></path> <path d="M20 9.5V13.5M20 22V17.5" stroke="var(--logoColor)" stroke-width="1.5" stroke-linecap="round" data-astro-cid-3ef6ksr2></path> <path d="M15 22V17C15 15.5858 15 14.8787 14.5607 14.4393C14.1213 14 13.4142 14 12 14C10.5858 14 9.87868 14 9.43934 14.4393M9 22V17" stroke="var(--logoColor)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-3ef6ksr2></path> <path d="M14 9.5C14 10.6046 13.1046 11.5 12 11.5C10.8954 11.5 10 10.6046 10 9.5C10 8.39543 10.8954 7.5 12 7.5C13.1046 7.5 14 8.39543 14 9.5Z" stroke="var(--logoColor)" stroke-width="1.5" data-astro-cid-3ef6ksr2></path> </g></svg> </a> <a href="/blog" data-astro-cid-3ef6ksr2="true" class="mb-0 p-0">  </a> </div> </div> <button class="text-(--logoColor) rounded-full flex justify-center items-center cursor-pointer p-2" id="theme-switch" data-astro-cid-3ef6ksr2> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon-icon lucide-moon" data-astro-cid-3ef6ksr2><path d="M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401" data-astro-cid-3ef6ksr2></path></svg> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun-icon lucide-sun" data-astro-cid-3ef6ksr2><circle cx="12" cy="12" r="4" data-astro-cid-3ef6ksr2></circle><path d="M12 2v2" data-astro-cid-3ef6ksr2></path><path d="M12 20v2" data-astro-cid-3ef6ksr2></path><path d="m4.93 4.93 1.41 1.41" data-astro-cid-3ef6ksr2></path><path d="m17.66 17.66 1.41 1.41" data-astro-cid-3ef6ksr2></path><path d="M2 12h2" data-astro-cid-3ef6ksr2></path><path d="M20 12h2" data-astro-cid-3ef6ksr2></path><path d="m6.34 17.66-1.41 1.41" data-astro-cid-3ef6ksr2></path><path d="m19.07 4.93-1.41 1.41" data-astro-cid-3ef6ksr2></path></svg> </button> </nav> </header>  <script type="module">const e=document.getElementById("theme-switch");e?.addEventListener("click",()=>{document.documentElement.classList.toggle("darkmode"),document.documentElement.classList.contains("darkmode")?localStorage.setItem("darkmode","true"):localStorage.removeItem("darkmode")});</script> <main class="flex flex-col items-center justify-center p-4" data-astro-cid-bvzihdzo> <div class="w-full sm:w-[90%]" data-astro-cid-bvzihdzo> <div class="prose" data-astro-cid-bvzihdzo> <div class="title" data-astro-cid-bvzihdzo> <div class="date" data-astro-cid-bvzihdzo> <time datetime="2023-10-23T21:00:00.000Z" class="font-(family-name:--my-date-font) font-semibold tracking-tight"> Oct-24-2023 </time>  </div> <h2 data-astro-cid-bvzihdzo>Tail Call Optimization Javascript</h2> <div id="like-container" data-astro-cid-bvzihdzo> <button class="Btn" data-astro-cid-bvzihdzo> <span class="leftContainer" id="increaseCount" data-astro-cid-bvzihdzo> <svg fill="white" viewBox="0 0 512 512" height="1em" xmlns="http://www.w3.org/2000/svg" data-astro-cid-bvzihdzo><path d="M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z" data-astro-cid-bvzihdzo></path></svg> <span class="like" data-astro-cid-bvzihdzo>Like</span> </span> <span class="count" id="like-count" data-astro-cid-bvzihdzo> 0 likes </span> <span class="count" id="read-count" data-astro-cid-bvzihdzo> 0 reads </span> </button> </div> </div> <hr data-astro-cid-bvzihdzo> <div id="sf-reading-progress-bar" data-astro-cid-bvzihdzo></div>  <p>In <em>JavaScript</em>, <strong>Tail Call Optimization</strong> is an optimization technique used by some JavaScript engines to make recursive function calls more memory-efficient. To understand <em>TCO</em>, you first need to be familiar with a few concepts:</p>
<p><strong>Recursion</strong>: Recursion is a programming technique where a function calls itself to solve a problem. Recursive functions can be powerful but may lead to stack overflow errors if not optimized, especially for deep recursive calls.</p>
<p><strong>Call Stack</strong>: JavaScript uses a call stack to keep track of function calls. Each time a function is called, a new frame is added to the stack, and when the function returns, the frame is removed. Deep recursive calls can fill up the call stack and lead to stack overflow errors.</p>
<p><strong>Tail Call</strong>: A tail call occurs when a function’s last action is to call another function. In other words, it’s a function call that appears at the end of another function. Tail calls are significant in the context of TCO.</p>
<p><strong>Tail Call Optimization</strong> (TCO) is an optimization technique that eliminates the need to create a new stack frame for a function call when the call is in a tail position. Instead of adding a new frame to the call stack, <em>TCO</em> reuses the current frame, making the process more memory-efficient and preventing stack overflow errors for deep recursion.</p>
<p>Here’s an example to illustrate TCO:</p>
<pre class="astro-code astro-code-themes synthwave-84 dracula" style="background-color:#262335;--shiki-dark-bg:#282A36;color:#bbbbbb;--shiki-dark:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#FEDE5D;--shiki-dark:#FF79C6">function</span><span style="color:#36F9F6;--shiki-dark:#50FA7B"> factorial</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">(</span><span style="color:#FF7EDB;--shiki-light-font-style:italic;--shiki-dark:#FFB86C;--shiki-dark-font-style:italic">n</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">, </span><span style="color:#FF7EDB;--shiki-light-font-style:italic;--shiki-dark:#FFB86C;--shiki-dark-font-style:italic">accumulator</span><span style="color:#FFFFFFEE;--shiki-dark:#FF79C6"> =</span><span style="color:#2EE2FA;--shiki-dark:#BD93F9"> 1</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#FEDE5D;--shiki-dark:#FF79C6">  if</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2"> (</span><span style="color:#FF7EDB;--shiki-dark:#F8F8F2">n</span><span style="color:#FEDE5D;--shiki-dark:#FF79C6"> ===</span><span style="color:#2EE2FA;--shiki-dark:#BD93F9"> 0</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">) </span><span style="color:#FEDE5D;--shiki-dark:#FF79C6">return</span><span style="color:#FF7EDB;--shiki-dark:#F8F8F2"> accumulator</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">;</span></span>
<span class="line"><span style="color:#FEDE5D;--shiki-dark:#FF79C6">  return</span><span style="color:#36F9F6;--shiki-dark:#50FA7B"> factorial</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">(</span><span style="color:#FF7EDB;--shiki-dark:#F8F8F2">n</span><span style="color:#FEDE5D;--shiki-dark:#FF79C6"> -</span><span style="color:#2EE2FA;--shiki-dark:#BD93F9"> 1</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">, </span><span style="color:#FF7EDB;--shiki-dark:#F8F8F2">accumulator</span><span style="color:#FEDE5D;--shiki-dark:#FF79C6"> *</span><span style="color:#FF7EDB;--shiki-dark:#F8F8F2"> n</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">);</span></span>
<span class="line"><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">}</span></span></code></pre>
<p>In this example, the factorial function calculates the factorial of a number using a <em>tail-recursive approach</em>. The recursive call occurs in the tail position, and modern JavaScript engines that support <em>TCO</em> will optimize it to prevent excessive stack usage.</p>
<p>This is how the data is passed as an example calculating 5!</p>
<p><code>console.log(factorial(5))</code></p>
<pre class="astro-code astro-code-themes synthwave-84 dracula" style="background-color:#262335;--shiki-dark-bg:#282A36;color:#bbbbbb;--shiki-dark:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#2EE2FA;--shiki-dark:#BD93F9">5</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">,</span><span style="color:#2EE2FA;--shiki-dark:#BD93F9">1</span><span style="color:#FEDE5D;--shiki-dark:#FF79C6"> =></span><span style="color:#2EE2FA;--shiki-dark:#BD93F9"> 4</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">,</span><span style="color:#2EE2FA;--shiki-dark:#BD93F9">5</span></span>
<span class="line"><span style="color:#2EE2FA;--shiki-dark:#BD93F9">4</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">,</span><span style="color:#2EE2FA;--shiki-dark:#BD93F9">5</span><span style="color:#FEDE5D;--shiki-dark:#FF79C6"> =></span><span style="color:#2EE2FA;--shiki-dark:#BD93F9"> 3</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">, </span><span style="color:#2EE2FA;--shiki-dark:#BD93F9">20</span></span>
<span class="line"><span style="color:#2EE2FA;--shiki-dark:#BD93F9">3</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">,</span><span style="color:#2EE2FA;--shiki-dark:#BD93F9">20</span><span style="color:#FEDE5D;--shiki-dark:#FF79C6"> =></span><span style="color:#2EE2FA;--shiki-dark:#BD93F9"> 2</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">, </span><span style="color:#2EE2FA;--shiki-dark:#BD93F9">60</span></span>
<span class="line"><span style="color:#2EE2FA;--shiki-dark:#BD93F9">2</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">,</span><span style="color:#2EE2FA;--shiki-dark:#BD93F9">60</span><span style="color:#FEDE5D;--shiki-dark:#FF79C6"> =></span><span style="color:#2EE2FA;--shiki-dark:#BD93F9"> 1</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">, </span><span style="color:#2EE2FA;--shiki-dark:#BD93F9">120</span></span>
<span class="line"><span style="color:#2EE2FA;--shiki-dark:#BD93F9">1</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">,</span><span style="color:#2EE2FA;--shiki-dark:#BD93F9">120</span><span style="color:#FEDE5D;--shiki-dark:#FF79C6"> =></span><span style="color:#2EE2FA;--shiki-dark:#BD93F9"> 0</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">, </span><span style="color:#2EE2FA;--shiki-dark:#BD93F9">120</span></span></code></pre>
<p>As you can seem we accumulate the value of n*1 from n to 1 avoiding creation of new stack frames with each request. This uses less memory as each new call passes all required data and does not create a new call slack.</p>
<p>This feature is however not shipped in all browsers, only safari with Edge Chrome and Firefox not agreeing on a standard way to ship it.</p>  </div> </div> </main> <div id="data-container" data-likes="0" data-reads="0" data-hash="24c683689f1b6fff745fd90547f9a3665d7d69affb139557951f16179d341089" data-astro-cid-bvzihdzo></div>  <script type="module" src="/_astro/BlogPost.astro_astro_type_script_index_1_lang.BtOU-HKl.js"></script> </body> </html>