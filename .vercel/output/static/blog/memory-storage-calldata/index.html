<!DOCTYPE html><html lang="en" data-astro-cid-bvzihdzo> <head><script type="module" src="/_astro/BlogPost.astro_astro_type_script_index_0_lang.VZXdc8kb.js"></script><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="preload" href="/_astro/twinkle-star-latin-400-normal.CutCPZrC.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="/_astro/geist-latin-wght-normal.Dm3htQBi.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="/_astro/roboto-mono-latin-wght-normal.CZtBPCCa.woff2" as="font" type="font/woff2" crossorigin><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v5.16.5"><!-- Canonical URL --><link rel="canonical" href="https://drew.is-a.dev/blog/memory-storage-calldata/"><!-- Primary Meta Tags --><title>Memory, Storage &amp; CallData Storage Locations</title><meta name="title" content="Memory, Storage &#38; CallData Storage Locations"><meta name="description" content="Solidity Storage Locations"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://zessu.github.io/"><meta property="og:title" content="Memory, Storage &#38; CallData Storage Locations"><meta property="og:description" content="Solidity Storage Locations"><meta property="og:image" content="https://drew.is-a.dev/blog-placeholder-1.jpg"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://x.com/amackzie"><meta property="twitter:title" content="Memory, Storage &#38; CallData Storage Locations"><meta property="twitter:description" content="Solidity Storage Locations"><meta property="twitter:image" content="https://drew.is-a.dev/blog-placeholder-1.jpg"><script>
    if (localStorage.getItem('darkmode')) {
        document.documentElement.classList.add('darkmode');
    }
</script><link rel="stylesheet" href="/_astro/_slug_.VBcr8UrD.css">
<style>.Btn[data-astro-cid-bvzihdzo]{height:25px;display:flex;align-items:center;justify-content:space-between;border:none;border-radius:5px;overflow:hidden;box-shadow:5px 5px 10px #00000017;cursor:pointer;background-color:transparent;padding:0}.leftContainer[data-astro-cid-bvzihdzo]{height:100%;background-color:#e00;display:flex;align-items:center;justify-content:center;padding:10px;gap:8px}.leftContainer[data-astro-cid-bvzihdzo] .like[data-astro-cid-bvzihdzo]{color:#fff;font-weight:600}.count[data-astro-cid-bvzihdzo]{height:100%;display:flex;align-items:center;justify-content:center;font-weight:600;position:relative;background-color:#fff;padding:5px;color:#e00}.Btn[data-astro-cid-bvzihdzo]:hover .leftContainer[data-astro-cid-bvzihdzo]{background-color:#db0000}.Btn[data-astro-cid-bvzihdzo]:active .leftContainer[data-astro-cid-bvzihdzo]{background-color:#c90000}.Btn[data-astro-cid-bvzihdzo]:active .leftContainer[data-astro-cid-bvzihdzo] svg[data-astro-cid-bvzihdzo]{transform:scale(1.15);transform-origin:top}div[data-astro-cid-bvzihdzo]#like-container{display:flex;align-items:center;justify-content:center}.hero-image[data-astro-cid-bvzihdzo]{width:100%}.hero-image[data-astro-cid-bvzihdzo] img[data-astro-cid-bvzihdzo]{display:block;border-radius:12px;box-shadow:var(--box-shadow)}.prose[data-astro-cid-bvzihdzo]{color:var(--fontColor)}.title[data-astro-cid-bvzihdzo]{margin-bottom:1em;text-align:center}.date[data-astro-cid-bvzihdzo]{margin-bottom:.5em;color:var(--gray)}.last-updated-on[data-astro-cid-bvzihdzo]{font-style:italic}#sf-reading-progress-bar[data-astro-cid-bvzihdzo]{position:fixed;top:0;left:0;z-index:9999;width:0%;height:5px;background-color:#46a787;margin:0}
</style><script type="module" src="/_astro/page.Cungvx1b.js"></script></head> <body class="" data-astro-cid-bvzihdzo> <header data-astro-cid-3ef6ksr2> <nav data-astro-cid-3ef6ksr2> <div data-astro-cid-3ef6ksr2> <span id="name" data-astro-cid-3ef6ksr2>Andrew Makenzi</span> </div> <div class="internal-links" data-astro-cid-3ef6ksr2> <div data-astro-cid-3ef6ksr2> <a href="/" data-astro-cid-3ef6ksr2="true" class="mb-0 p-0"> <svg viewBox="0 0 24 24" fill="none" height="35px" width="35px" xmlns="httpwww.w3.org/2000/svg" data-astro-cid-3ef6ksr2><g id="SVGRepo_bgCarrier" stroke-width="0" data-astro-cid-3ef6ksr2></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-3ef6ksr2></g><g id="SVGRepo_iconCarrier" data-astro-cid-3ef6ksr2> <path d="M22 22L2 22" stroke="var(--logoColor)" stroke-width="1.5" stroke-linecap="round" data-astro-cid-3ef6ksr2></path> <path d="M2 11L6.06296 7.74968M22 11L13.8741 4.49931C12.7784 3.62279 11.2216 3.62279 10.1259 4.49931L9.34398 5.12486" stroke="var(--logoColor)" stroke-width="1.5" stroke-linecap="round" data-astro-cid-3ef6ksr2></path> <path d="M15.5 5.5V3.5C15.5 3.22386 15.7239 3 16 3H18.5C18.7761 3 19 3.22386 19 3.5V8.5" stroke="var(--logoColor)" stroke-width="1.5" stroke-linecap="round" data-astro-cid-3ef6ksr2></path> <path d="M4 22V9.5" stroke="var(--logoColor)" stroke-width="1.5" stroke-linecap="round" data-astro-cid-3ef6ksr2></path> <path d="M20 9.5V13.5M20 22V17.5" stroke="var(--logoColor)" stroke-width="1.5" stroke-linecap="round" data-astro-cid-3ef6ksr2></path> <path d="M15 22V17C15 15.5858 15 14.8787 14.5607 14.4393C14.1213 14 13.4142 14 12 14C10.5858 14 9.87868 14 9.43934 14.4393M9 22V17" stroke="var(--logoColor)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-3ef6ksr2></path> <path d="M14 9.5C14 10.6046 13.1046 11.5 12 11.5C10.8954 11.5 10 10.6046 10 9.5C10 8.39543 10.8954 7.5 12 7.5C13.1046 7.5 14 8.39543 14 9.5Z" stroke="var(--logoColor)" stroke-width="1.5" data-astro-cid-3ef6ksr2></path> </g></svg> </a> <a href="/blog" data-astro-cid-3ef6ksr2="true" class="mb-0 p-0">  </a> </div> </div> <button class="text-(--logoColor) rounded-full flex justify-center items-center cursor-pointer p-2" id="theme-switch" data-astro-cid-3ef6ksr2> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon-icon lucide-moon" data-astro-cid-3ef6ksr2><path d="M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401" data-astro-cid-3ef6ksr2></path></svg> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun-icon lucide-sun" data-astro-cid-3ef6ksr2><circle cx="12" cy="12" r="4" data-astro-cid-3ef6ksr2></circle><path d="M12 2v2" data-astro-cid-3ef6ksr2></path><path d="M12 20v2" data-astro-cid-3ef6ksr2></path><path d="m4.93 4.93 1.41 1.41" data-astro-cid-3ef6ksr2></path><path d="m17.66 17.66 1.41 1.41" data-astro-cid-3ef6ksr2></path><path d="M2 12h2" data-astro-cid-3ef6ksr2></path><path d="M20 12h2" data-astro-cid-3ef6ksr2></path><path d="m6.34 17.66-1.41 1.41" data-astro-cid-3ef6ksr2></path><path d="m19.07 4.93-1.41 1.41" data-astro-cid-3ef6ksr2></path></svg> </button> </nav> </header>  <script type="module">const e=document.getElementById("theme-switch");e?.addEventListener("click",()=>{document.documentElement.classList.toggle("darkmode"),document.documentElement.classList.contains("darkmode")?localStorage.setItem("darkmode","true"):localStorage.removeItem("darkmode")});</script> <main class="flex flex-col items-center justify-center p-4" data-astro-cid-bvzihdzo> <div class="w-full sm:w-[90%]" data-astro-cid-bvzihdzo> <div class="prose" data-astro-cid-bvzihdzo> <div class="title" data-astro-cid-bvzihdzo> <div class="date" data-astro-cid-bvzihdzo> <time datetime="2026-02-10T21:00:00.000Z" class="font-(family-name:--my-date-font) font-semibold tracking-tight"> Feb-11-2026 </time>  </div> <h2 data-astro-cid-bvzihdzo>Memory, Storage &amp; CallData Storage Locations</h2> <div id="like-container" data-astro-cid-bvzihdzo> <button class="Btn" data-astro-cid-bvzihdzo> <span class="leftContainer" id="increaseCount" data-astro-cid-bvzihdzo> <svg fill="white" viewBox="0 0 512 512" height="1em" xmlns="http://www.w3.org/2000/svg" data-astro-cid-bvzihdzo><path d="M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z" data-astro-cid-bvzihdzo></path></svg> <span class="like" data-astro-cid-bvzihdzo>Like</span> </span> <span class="count" id="like-count" data-astro-cid-bvzihdzo> 0 likes </span> <span class="count" id="read-count" data-astro-cid-bvzihdzo> 0 reads </span> </button> </div> </div> <hr data-astro-cid-bvzihdzo> <div id="sf-reading-progress-bar" data-astro-cid-bvzihdzo></div>  <h4 id="solidity-data-locations-explained"><strong>Solidity Data Locations Explained</strong> üöÄ</h4>
<p>Understanding <code>storage</code>, <code>memory</code>, and <code>calldata</code> is one of those things that feels confusing at first ‚Äî but once it clicks, it really clicks. This guide breaks it down in a practical way.</p>
<hr>
<h5 id="quick-reference"><strong>Quick Reference</strong></h5>

































<table><thead><tr><th>Location</th><th>Valid For</th><th>Mutable</th><th>Use Case</th><th>Gas Cost</th></tr></thead><tbody><tr><td><strong><code>calldata</code></strong></td><td>External functions only</td><td>‚ùå Read-only</td><td>Reading arrays/structs/strings from transaction data</td><td>Cheapest</td></tr><tr><td><strong><code>memory</code></strong></td><td>All functions</td><td>‚úÖ Yes</td><td>Modifying arrays/structs, temporary computation</td><td>Moderate</td></tr><tr><td><strong><code>storage</code></strong></td><td>State variables &#x26; internal</td><td>‚úÖ Yes</td><td>Modifying state variables directly</td><td>Variable</td></tr></tbody></table>
<hr>
<br>
<h5 id="-storage">üì¶ <strong>Storage</strong></h5>
<p>Persistent storage location in smart contracts. Data written here is stored <strong>on-chain</strong>, which makes it expensive compared to other storage options. You need this to store long-term user data, e.g. balances.</p>
<hr>
<h5 id="-memory">üß† <strong>Memory</strong></h5>
<p>Temporary storage location. You use this to store data temporarily ‚Äî especially data you want to manipulate or work with.This data is stored in memory and cleared once the function exits. Suitable for intermediate calculations. Cheaper than <code>storage</code> but more expensive than <code>calldata</code>.</p>
<hr>
<h5 id="-calldata">üì• <strong>CallData</strong></h5>
<p>Another temporary storage location. Unlike memory, it is <strong>immutable and read-only</strong>. Perfect for external function arguments that you do not want to mutate. This makes it cheaper than <code>memory</code>, because the data does not need to be copied.</p>
<hr>
<h4 id="-value-types-vs-reference-types">üîé <strong>Value Types vs Reference Types</strong></h4>
<p>Value types (e.g. <code>uint</code>, <code>address</code>, <code>bool</code>) are always passed by value.<br>
They do <strong>not</strong> need storage locations. These are stored on the stack during execution and passed by copying the value directly to the function. So a <code>uint256 number</code> literally holds the number itself ‚Äî it is copied when passed around.</p>
<pre class="astro-code astro-code-themes synthwave-84 dracula" style="background-color:#262335;--shiki-dark-bg:#282A36;color:#bbbbbb;--shiki-dark:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="solidity"><code><span class="line"><span style="color:#848BBD;--shiki-light-font-style:italic;--shiki-dark:#6272A4;--shiki-dark-font-style:inherit">// ‚úÖ Valid - value types don't need locations</span></span>
<span class="line"><span style="color:#FEDE5D;--shiki-dark:#FF79C6">function</span><span style="color:#36F9F6;--shiki-dark:#50FA7B"> foo</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">(</span><span style="color:#FE4450;--shiki-light-font-style:inherit;--shiki-dark:#8BE9FD;--shiki-dark-font-style:italic">uint256</span><span style="color:#FF7EDB;--shiki-light-font-style:italic;--shiki-dark:#FFB86C;--shiki-dark-font-style:italic"> number</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">) </span><span style="color:#FEDE5D;--shiki-dark:#FF79C6">external</span><span style="color:#FEDE5D;--shiki-dark:#FF79C6"> pure</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2"> {}</span></span>
<span class="line"><span style="color:#FEDE5D;--shiki-dark:#FF79C6">function</span><span style="color:#36F9F6;--shiki-dark:#50FA7B"> bar</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">(</span><span style="color:#FE4450;--shiki-light-font-style:inherit;--shiki-dark:#8BE9FD;--shiki-dark-font-style:italic">address</span><span style="color:#FF7EDB;--shiki-light-font-style:italic;--shiki-dark:#FFB86C;--shiki-dark-font-style:italic"> user</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">) </span><span style="color:#FEDE5D;--shiki-dark:#FF79C6">external</span><span style="color:#FEDE5D;--shiki-dark:#FF79C6"> pure</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2"> {}</span></span>
<span class="line"><span style="color:#FEDE5D;--shiki-dark:#FF79C6">function</span><span style="color:#36F9F6;--shiki-dark:#50FA7B"> baz</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">(</span><span style="color:#FE4450;--shiki-light-font-style:inherit;--shiki-dark:#8BE9FD;--shiki-dark-font-style:italic">bool</span><span style="color:#FF7EDB;--shiki-light-font-style:italic;--shiki-dark:#FFB86C;--shiki-dark-font-style:italic"> flag</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">) </span><span style="color:#FEDE5D;--shiki-dark:#FF79C6">external</span><span style="color:#FEDE5D;--shiki-dark:#FF79C6"> pure</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#848BBD;--shiki-light-font-style:italic;--shiki-dark:#6272A4;--shiki-dark-font-style:inherit">// ‚ùå Invalid - compile error!</span></span>
<span class="line"><span style="color:#FEDE5D;--shiki-dark:#FF79C6">function</span><span style="color:#36F9F6;--shiki-dark:#50FA7B"> invalid</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">(</span><span style="color:#FE4450;--shiki-light-font-style:inherit;--shiki-dark:#8BE9FD;--shiki-dark-font-style:italic">uint256</span><span style="color:#FEDE5D;--shiki-dark:#FF79C6"> calldata</span><span style="color:#FF7EDB;--shiki-light-font-style:italic;--shiki-dark:#FFB86C;--shiki-dark-font-style:italic"> number</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">) </span><span style="color:#FEDE5D;--shiki-dark:#FF79C6">external</span><span style="color:#FEDE5D;--shiki-dark:#FF79C6"> pure</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2"> {}</span></span></code></pre>
<br>
<p>Reference types (e.g. <code>string</code>, <code>bytes</code>, <code>arrays</code>, <code>structs</code>, <code>mappings</code>) on the other hand are stored in <code>memory</code>, <code>calldata</code>, or <code>storage</code>. Reference types can be dynamic and large, so we do not want to automatically copy them like fixed-size types (e.g. <code>uint256</code>). Because of this, we store a reference (pointer) to where the data lives.</p>
<pre class="astro-code astro-code-themes synthwave-84 dracula" style="background-color:#262335;--shiki-dark-bg:#282A36;color:#bbbbbb;--shiki-dark:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="solidity"><code><span class="line"><span style="color:#FEDE5D;--shiki-dark:#FF79C6">function</span><span style="color:#36F9F6;--shiki-dark:#50FA7B"> foo</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">(</span><span style="color:#FE4450;--shiki-light-font-style:inherit;--shiki-dark:#8BE9FD;--shiki-dark-font-style:italic">string</span><span style="color:#FEDE5D;--shiki-dark:#FF79C6"> memory</span><span style="color:#FF7EDB;--shiki-light-font-style:italic;--shiki-dark:#FFB86C;--shiki-dark-font-style:italic"> s</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">) </span><span style="color:#FEDE5D;--shiki-dark:#FF79C6">public</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2"> {}</span></span>
<span class="line"><span style="color:#FEDE5D;--shiki-dark:#FF79C6">function</span><span style="color:#36F9F6;--shiki-dark:#50FA7B"> foo</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">(</span><span style="color:#FE4450;--shiki-light-font-style:inherit;--shiki-dark:#8BE9FD;--shiki-dark-font-style:italic">string</span><span style="color:#FEDE5D;--shiki-dark:#FF79C6"> calldata</span><span style="color:#FF7EDB;--shiki-light-font-style:italic;--shiki-dark:#FFB86C;--shiki-dark-font-style:italic"> s</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">) </span><span style="color:#FEDE5D;--shiki-dark:#FF79C6">external</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2"> {}</span></span></code></pre>
<br>
<p><code>s</code> is not the string itself ‚Äî it is a pointer to wherever the data is stored during execution.</p>
<ul>
<li><strong><code>storage</code></strong> ‚Üí refers to state stored on-chain.</li>
<li><strong><code>calldata</code></strong> ‚Üí Data provided in transaction input.</li>
<li><strong><code>memory</code></strong> ‚Üí Copies the provided data into memory so we can work with it.</li>
</ul>
<p><strong><code>calldata</code></strong> is cheaper than <code>memory</code> because you leave the data in the transaction input and avoid copying.</p>
<h4 id="under-the-hood-Ô∏è"><strong>Under the Hood</strong> ‚öôÔ∏è</h4>
<ul>
<li><strong><code>memory</code></strong> is linear, expandable EVM memory</li>
<li><strong><code>calldata</code></strong> is a read-only byte array attached to the transaction</li>
<li><strong><code>storage</code></strong> is persistent key-value storage (eventually written to disk by nodes)</li>
</ul>
<br>
<h5 id="-calldata-example">üü¢ <strong>Calldata Example</strong></h5>
<pre class="astro-code astro-code-themes synthwave-84 dracula" style="background-color:#262335;--shiki-dark-bg:#282A36;color:#bbbbbb;--shiki-dark:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#FF7EDB;--shiki-dark:#F8F8F2">contract</span><span style="color:#FF7EDB;--shiki-dark:#F8F8F2"> CalldataExample</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#848BBD;--shiki-light-font-style:italic;--shiki-dark:#6272A4;--shiki-dark-font-style:inherit">    // Sum an array without modifying it</span></span>
<span class="line"><span style="color:#FEDE5D;--shiki-dark:#FF79C6">    function</span><span style="color:#36F9F6;--shiki-dark:#50FA7B"> sumArray</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">(</span><span style="color:#FF7EDB;--shiki-light-font-style:italic;--shiki-dark:#FFB86C;--shiki-dark-font-style:italic">uint256</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">[] </span><span style="color:#FF7EDB;--shiki-light-font-style:italic;--shiki-dark:#FFB86C;--shiki-dark-font-style:italic">calldata</span><span style="color:#FF7EDB;--shiki-light-font-style:italic;--shiki-dark:#FFB86C;--shiki-dark-font-style:italic"> arr</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">) </span><span style="color:#36F9F6;--shiki-dark:#50FA7B">external</span><span style="color:#36F9F6;--shiki-dark:#50FA7B"> pure</span><span style="color:#36F9F6;--shiki-dark:#50FA7B"> returns</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2"> (</span><span style="color:#FF7EDB;--shiki-light-font-style:italic;--shiki-dark:#FFB86C;--shiki-dark-font-style:italic">uint256</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#FF7EDB;--shiki-dark:#F8F8F2">        uint256</span><span style="color:#FF7EDB;--shiki-dark:#F8F8F2"> sum</span><span style="color:#FFFFFFEE;--shiki-dark:#FF79C6"> =</span><span style="color:#F97E72;--shiki-dark:#BD93F9"> 0</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">;</span></span>
<span class="line"><span style="color:#FEDE5D;--shiki-dark:#FF79C6">        for</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2"> (</span><span style="color:#FF7EDB;--shiki-dark:#F8F8F2">uint256</span><span style="color:#FF7EDB;--shiki-dark:#F8F8F2"> i</span><span style="color:#FFFFFFEE;--shiki-dark:#FF79C6"> =</span><span style="color:#F97E72;--shiki-dark:#BD93F9"> 0</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">; </span><span style="color:#FF7EDB;--shiki-dark:#F8F8F2">i</span><span style="color:#FEDE5D;--shiki-dark:#FF79C6"> &#x3C;</span><span style="color:#FF7EDB;--shiki-dark:#F8F8F2"> arr</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">.</span><span style="color:#FF7EDB;--shiki-dark:#F8F8F2">length</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">; </span><span style="color:#FF7EDB;--shiki-dark:#F8F8F2">i</span><span style="color:#FEDE5D;--shiki-dark:#FF79C6">++</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#FF7EDB;--shiki-dark:#F8F8F2">            sum</span><span style="color:#FFFFFFEE;--shiki-dark:#FF79C6"> +=</span><span style="color:#FF7EDB;--shiki-dark:#F8F8F2"> arr</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">[</span><span style="color:#FF7EDB;--shiki-dark:#F8F8F2">i</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">];</span></span>
<span class="line"><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#FEDE5D;--shiki-dark:#FF79C6">        return</span><span style="color:#FF7EDB;--shiki-dark:#F8F8F2"> sum</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">;</span></span>
<span class="line"><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#848BBD;--shiki-light-font-style:italic;--shiki-dark:#6272A4;--shiki-dark-font-style:inherit">    // Echo a string back</span></span>
<span class="line"><span style="color:#FEDE5D;--shiki-dark:#FF79C6">    function</span><span style="color:#36F9F6;--shiki-dark:#50FA7B"> echoMessage</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">(</span><span style="color:#FF7EDB;--shiki-light-font-style:italic;--shiki-dark:#FFB86C;--shiki-dark-font-style:italic">string</span><span style="color:#FF7EDB;--shiki-light-font-style:italic;--shiki-dark:#FFB86C;--shiki-dark-font-style:italic"> calldata</span><span style="color:#FF7EDB;--shiki-light-font-style:italic;--shiki-dark:#FFB86C;--shiki-dark-font-style:italic"> message</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">)</span></span>
<span class="line"><span style="color:#36F9F6;--shiki-dark:#50FA7B">        external</span></span>
<span class="line"><span style="color:#36F9F6;--shiki-dark:#50FA7B">        pure</span></span>
<span class="line"><span style="color:#36F9F6;--shiki-dark:#50FA7B">        returns</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2"> (</span><span style="color:#FF7EDB;--shiki-light-font-style:italic;--shiki-dark:#FFB86C;--shiki-dark-font-style:italic">string</span><span style="color:#FF7EDB;--shiki-light-font-style:italic;--shiki-dark:#FFB86C;--shiki-dark-font-style:italic"> memory</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">)</span></span>
<span class="line"><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">    {</span></span>
<span class="line"><span style="color:#848BBD;--shiki-light-font-style:italic;--shiki-dark:#6272A4;--shiki-dark-font-style:inherit">        // Cannot modify: message = "new"; ‚ùå Compile error!</span></span>
<span class="line"><span style="color:#FEDE5D;--shiki-dark:#FF79C6">        return</span><span style="color:#FF7EDB;--shiki-dark:#F8F8F2"> message</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">; </span><span style="color:#848BBD;--shiki-light-font-style:italic;--shiki-dark:#6272A4;--shiki-dark-font-style:inherit">// copied to memory for return</span></span>
<span class="line"><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">}</span></span></code></pre>
<br>
<h5 id="-memory-example">üü° <strong>Memory Example</strong></h5>
<pre class="astro-code astro-code-themes synthwave-84 dracula" style="background-color:#262335;--shiki-dark-bg:#282A36;color:#bbbbbb;--shiki-dark:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="solidity"><code><span class="line"><span style="color:#FEDE5D;--shiki-dark:#FF79C6">contract</span><span style="color:#FE4450;--shiki-light-font-style:inherit;--shiki-dark:#8BE9FD;--shiki-dark-font-style:italic"> MemoryExample</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#848BBD;--shiki-light-font-style:italic;--shiki-dark:#6272A4;--shiki-dark-font-style:inherit">    // Double each element - requires modification</span></span>
<span class="line"><span style="color:#FEDE5D;--shiki-dark:#FF79C6">    function</span><span style="color:#36F9F6;--shiki-dark:#50FA7B"> doubleArray</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">(</span><span style="color:#FE4450;--shiki-light-font-style:inherit;--shiki-dark:#8BE9FD;--shiki-dark-font-style:italic">uint256</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">[] </span><span style="color:#FEDE5D;--shiki-dark:#FF79C6">memory</span><span style="color:#FF7EDB;--shiki-light-font-style:italic;--shiki-dark:#FFB86C;--shiki-dark-font-style:italic"> arr</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">)</span></span>
<span class="line"><span style="color:#FEDE5D;--shiki-dark:#FF79C6">        external</span></span>
<span class="line"><span style="color:#FEDE5D;--shiki-dark:#FF79C6">        pure</span></span>
<span class="line"><span style="color:#FEDE5D;--shiki-dark:#FF79C6">        returns</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2"> (</span><span style="color:#FE4450;--shiki-light-font-style:inherit;--shiki-dark:#8BE9FD;--shiki-dark-font-style:italic">uint256</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">[] </span><span style="color:#FEDE5D;--shiki-dark:#FF79C6">memory</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">)</span></span>
<span class="line"><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">    {</span></span>
<span class="line"><span style="color:#FEDE5D;--shiki-dark:#FF79C6">        for</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2"> (</span><span style="color:#FE4450;--shiki-light-font-style:inherit;--shiki-dark:#8BE9FD;--shiki-dark-font-style:italic">uint256</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2"> i </span><span style="color:#FFFFFFEE;--shiki-dark:#FF79C6">=</span><span style="color:#F97E72;--shiki-dark:#BD93F9"> 0</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">; i </span><span style="color:#FEDE5D;--shiki-dark:#FF79C6">&#x3C;</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2"> arr.length; i</span><span style="color:#FEDE5D;--shiki-dark:#FF79C6">++</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">            arr[i] </span><span style="color:#FEDE5D;--shiki-dark:#FF79C6">*</span><span style="color:#FFFFFFEE;--shiki-dark:#FF79C6">=</span><span style="color:#F97E72;--shiki-dark:#BD93F9"> 2</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">;  </span><span style="color:#848BBD;--shiki-light-font-style:italic;--shiki-dark:#6272A4;--shiki-dark-font-style:inherit">// ‚úÖ Can modify memory</span></span>
<span class="line"><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#FEDE5D;--shiki-dark:#FF79C6">        return</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2"> arr;</span></span>
<span class="line"><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#848BBD;--shiki-light-font-style:italic;--shiki-dark:#6272A4;--shiki-dark-font-style:inherit">    // Concatenate strings</span></span>
<span class="line"><span style="color:#FEDE5D;--shiki-dark:#FF79C6">    function</span><span style="color:#36F9F6;--shiki-dark:#50FA7B"> concatenate</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">(</span><span style="color:#FE4450;--shiki-light-font-style:inherit;--shiki-dark:#8BE9FD;--shiki-dark-font-style:italic">string</span><span style="color:#FEDE5D;--shiki-dark:#FF79C6"> memory</span><span style="color:#FF7EDB;--shiki-light-font-style:italic;--shiki-dark:#FFB86C;--shiki-dark-font-style:italic"> a</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">, </span><span style="color:#FE4450;--shiki-light-font-style:inherit;--shiki-dark:#8BE9FD;--shiki-dark-font-style:italic">string</span><span style="color:#FEDE5D;--shiki-dark:#FF79C6"> memory</span><span style="color:#FF7EDB;--shiki-light-font-style:italic;--shiki-dark:#FFB86C;--shiki-dark-font-style:italic"> b</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">)</span></span>
<span class="line"><span style="color:#FEDE5D;--shiki-dark:#FF79C6">        external</span></span>
<span class="line"><span style="color:#FEDE5D;--shiki-dark:#FF79C6">        pure</span></span>
<span class="line"><span style="color:#FEDE5D;--shiki-dark:#FF79C6">        returns</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2"> (</span><span style="color:#FE4450;--shiki-light-font-style:inherit;--shiki-dark:#8BE9FD;--shiki-dark-font-style:italic">string</span><span style="color:#FEDE5D;--shiki-dark:#FF79C6"> memory</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">)</span></span>
<span class="line"><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">    {</span></span>
<span class="line"><span style="color:#FEDE5D;--shiki-dark:#FF79C6">        return</span><span style="color:#FE4450;--shiki-light-font-style:inherit;--shiki-dark:#8BE9FD;--shiki-dark-font-style:italic"> string</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">(</span><span style="color:#FE4450;--shiki-light-font-weight:bold;--shiki-light-font-style:inherit;--shiki-dark:#BD93F9;--shiki-dark-font-weight:inherit;--shiki-dark-font-style:italic">abi</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">.</span><span style="color:#36F9F6;--shiki-dark:#50FA7B">encodePacked</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">(a, b));</span></span>
<span class="line"><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">}</span></span></code></pre>
<br>
<h5 id="-storage-example">üîµ <strong>Storage Example</strong></h5>
<pre class="astro-code astro-code-themes synthwave-84 dracula" style="background-color:#262335;--shiki-dark-bg:#282A36;color:#bbbbbb;--shiki-dark:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="solidity"><code><span class="line"><span style="color:#FEDE5D;--shiki-dark:#FF79C6">contract</span><span style="color:#FE4450;--shiki-light-font-style:inherit;--shiki-dark:#8BE9FD;--shiki-dark-font-style:italic"> StorageExample</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FE4450;--shiki-light-font-style:inherit;--shiki-dark:#8BE9FD;--shiki-dark-font-style:italic">    uint256</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">[] </span><span style="color:#FEDE5D;--shiki-dark:#FF79C6">public</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2"> myArray; </span><span style="color:#848BBD;--shiki-light-font-style:italic;--shiki-dark:#6272A4;--shiki-dark-font-style:inherit">// State variable in storage</span></span>
<span class="line"></span>
<span class="line"><span style="color:#848BBD;--shiki-light-font-style:italic;--shiki-dark:#6272A4;--shiki-dark-font-style:inherit">    // ‚úÖ Valid - internal function can use storage</span></span>
<span class="line"><span style="color:#FEDE5D;--shiki-dark:#FF79C6">    function</span><span style="color:#36F9F6;--shiki-dark:#50FA7B"> _modifyStorage</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">(</span><span style="color:#FE4450;--shiki-light-font-style:inherit;--shiki-dark:#8BE9FD;--shiki-dark-font-style:italic">uint256</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">[] </span><span style="color:#FEDE5D;--shiki-dark:#FF79C6">storage</span><span style="color:#FF7EDB;--shiki-light-font-style:italic;--shiki-dark:#FFB86C;--shiki-dark-font-style:italic"> arr</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">) </span><span style="color:#FEDE5D;--shiki-dark:#FF79C6">internal</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">        arr.</span><span style="color:#36F9F6;--shiki-dark:#50FA7B">push</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">(</span><span style="color:#F97E72;--shiki-dark:#BD93F9">999</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">);      </span><span style="color:#848BBD;--shiki-light-font-style:italic;--shiki-dark:#6272A4;--shiki-dark-font-style:inherit">// Modifies original storage!</span></span>
<span class="line"><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">        arr[</span><span style="color:#F97E72;--shiki-dark:#BD93F9">0</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">] </span><span style="color:#FFFFFFEE;--shiki-dark:#FF79C6">=</span><span style="color:#F97E72;--shiki-dark:#BD93F9"> 100</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">;       </span><span style="color:#848BBD;--shiki-light-font-style:italic;--shiki-dark:#6272A4;--shiki-dark-font-style:inherit">// Also modifies original</span></span>
<span class="line"><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#848BBD;--shiki-light-font-style:italic;--shiki-dark:#6272A4;--shiki-dark-font-style:inherit">    // ‚ùå INVALID - external functions cannot use storage parameters</span></span>
<span class="line"><span style="color:#848BBD;--shiki-light-font-style:italic;--shiki-dark:#6272A4;--shiki-dark-font-style:inherit">    // function invalid(uint256[] storage arr) external {}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FEDE5D;--shiki-dark:#FF79C6">    function</span><span style="color:#36F9F6;--shiki-dark:#50FA7B"> addToMyArray</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">() </span><span style="color:#FEDE5D;--shiki-dark:#FF79C6">external</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#36F9F6;--shiki-dark:#50FA7B">        _modifyStorage</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">(myArray); </span><span style="color:#848BBD;--shiki-light-font-style:italic;--shiki-dark:#6272A4;--shiki-dark-font-style:inherit">// Pass reference to storage</span></span>
<span class="line"><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">}</span></span></code></pre>
<br>
<h5 id="-complete-example">üü£ <strong>Complete Example</strong></h5>
<pre class="astro-code astro-code-themes synthwave-84 dracula" style="background-color:#262335;--shiki-dark-bg:#282A36;color:#bbbbbb;--shiki-dark:#F8F8F2; overflow-x: auto;" tabindex="0" data-language="solidity"><code><span class="line"><span style="color:#FEDE5D;--shiki-dark:#FF79C6">contract</span><span style="color:#FE4450;--shiki-light-font-style:inherit;--shiki-dark:#8BE9FD;--shiki-dark-font-style:italic"> CompleteExample</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FE4450;--shiki-light-font-style:inherit;--shiki-dark:#8BE9FD;--shiki-dark-font-style:italic">    uint256</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">[] </span><span style="color:#FEDE5D;--shiki-dark:#FF79C6">public</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2"> stateArray;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#848BBD;--shiki-light-font-style:italic;--shiki-dark:#6272A4;--shiki-dark-font-style:inherit">    // CALLDATA: Read-only, external, gas efficient</span></span>
<span class="line"><span style="color:#FEDE5D;--shiki-dark:#FF79C6">    function</span><span style="color:#36F9F6;--shiki-dark:#50FA7B"> readOnly</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">(</span><span style="color:#FE4450;--shiki-light-font-style:inherit;--shiki-dark:#8BE9FD;--shiki-dark-font-style:italic">uint256</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">[] </span><span style="color:#FEDE5D;--shiki-dark:#FF79C6">calldata</span><span style="color:#FF7EDB;--shiki-light-font-style:italic;--shiki-dark:#FFB86C;--shiki-dark-font-style:italic"> arr</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">)</span></span>
<span class="line"><span style="color:#FEDE5D;--shiki-dark:#FF79C6">        external</span></span>
<span class="line"><span style="color:#FEDE5D;--shiki-dark:#FF79C6">        pure</span></span>
<span class="line"><span style="color:#FEDE5D;--shiki-dark:#FF79C6">        returns</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2"> (</span><span style="color:#FE4450;--shiki-light-font-style:inherit;--shiki-dark:#8BE9FD;--shiki-dark-font-style:italic">uint256</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">)</span></span>
<span class="line"><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">    {</span></span>
<span class="line"><span style="color:#FEDE5D;--shiki-dark:#FF79C6">        return</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2"> arr[</span><span style="color:#F97E72;--shiki-dark:#BD93F9">0</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">];  </span><span style="color:#848BBD;--shiki-light-font-style:italic;--shiki-dark:#6272A4;--shiki-dark-font-style:inherit">// Just reading, no copy made</span></span>
<span class="line"><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#848BBD;--shiki-light-font-style:italic;--shiki-dark:#6272A4;--shiki-dark-font-style:inherit">    // MEMORY: Modifiable copy</span></span>
<span class="line"><span style="color:#FEDE5D;--shiki-dark:#FF79C6">    function</span><span style="color:#36F9F6;--shiki-dark:#50FA7B"> modifyCopy</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">(</span><span style="color:#FE4450;--shiki-light-font-style:inherit;--shiki-dark:#8BE9FD;--shiki-dark-font-style:italic">uint256</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">[] </span><span style="color:#FEDE5D;--shiki-dark:#FF79C6">memory</span><span style="color:#FF7EDB;--shiki-light-font-style:italic;--shiki-dark:#FFB86C;--shiki-dark-font-style:italic"> arr</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">)</span></span>
<span class="line"><span style="color:#FEDE5D;--shiki-dark:#FF79C6">        external</span></span>
<span class="line"><span style="color:#FEDE5D;--shiki-dark:#FF79C6">        pure</span></span>
<span class="line"><span style="color:#FEDE5D;--shiki-dark:#FF79C6">        returns</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2"> (</span><span style="color:#FE4450;--shiki-light-font-style:inherit;--shiki-dark:#8BE9FD;--shiki-dark-font-style:italic">uint256</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">[] </span><span style="color:#FEDE5D;--shiki-dark:#FF79C6">memory</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">)</span></span>
<span class="line"><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">    {</span></span>
<span class="line"><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">        arr[</span><span style="color:#F97E72;--shiki-dark:#BD93F9">0</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">] </span><span style="color:#FFFFFFEE;--shiki-dark:#FF79C6">=</span><span style="color:#F97E72;--shiki-dark:#BD93F9"> 999</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">;  </span><span style="color:#848BBD;--shiki-light-font-style:italic;--shiki-dark:#6272A4;--shiki-dark-font-style:inherit">// Modifies copy only</span></span>
<span class="line"><span style="color:#FEDE5D;--shiki-dark:#FF79C6">        return</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2"> arr;</span></span>
<span class="line"><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#848BBD;--shiki-light-font-style:italic;--shiki-dark:#6272A4;--shiki-dark-font-style:inherit">    // STORAGE: Direct state reference, internal only</span></span>
<span class="line"><span style="color:#FEDE5D;--shiki-dark:#FF79C6">    function</span><span style="color:#36F9F6;--shiki-dark:#50FA7B"> _modifyState</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">(</span><span style="color:#FE4450;--shiki-light-font-style:inherit;--shiki-dark:#8BE9FD;--shiki-dark-font-style:italic">uint256</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">[] </span><span style="color:#FEDE5D;--shiki-dark:#FF79C6">storage</span><span style="color:#FF7EDB;--shiki-light-font-style:italic;--shiki-dark:#FFB86C;--shiki-dark-font-style:italic"> arr</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">) </span><span style="color:#FEDE5D;--shiki-dark:#FF79C6">internal</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">        arr.</span><span style="color:#36F9F6;--shiki-dark:#50FA7B">push</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">(</span><span style="color:#F97E72;--shiki-dark:#BD93F9">1</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">);   </span><span style="color:#848BBD;--shiki-light-font-style:italic;--shiki-dark:#6272A4;--shiki-dark-font-style:inherit">// Modifies original state!</span></span>
<span class="line"><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FEDE5D;--shiki-dark:#FF79C6">    function</span><span style="color:#36F9F6;--shiki-dark:#50FA7B"> addToState</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">() </span><span style="color:#FEDE5D;--shiki-dark:#FF79C6">external</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#848BBD;--shiki-light-font-style:italic;--shiki-dark:#6272A4;--shiki-dark-font-style:inherit">        // Do some checks internally (e.g. validation), then modify state</span></span>
<span class="line"><span style="color:#36F9F6;--shiki-dark:#50FA7B">        _modifyState</span><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">(stateArray);</span></span>
<span class="line"><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#BBBBBB;--shiki-dark:#F8F8F2">}</span></span></code></pre>
<br>
<h4 id="-golden-rule">üèÜ <strong>Golden Rule</strong></h4>
<blockquote>
</blockquote>
<ul>
<li>Use <strong><code>calldata</code></strong> when you can.</li>
<li>Use <strong><code>memory</code></strong> when you need to modify.</li>
<li>Use <strong><code>storage</code></strong> only for internal state modifications.</li>
</ul>
<br>
<h4 id="references"><code>References</code></h4>
<ul>
<li><a href="https://medium.com/coinmonks/understanding-ethereum-storage-storage-memory-calldata-and-transient-storage-2481bbcf363c">Understanding Ethereum Storage</a></li>
<li><a href="https://docs.base.org/learn/storage/how-storage-works">How Storage Works - Base Docs</a></li>
</ul>  </div> </div> </main> <div id="data-container" data-likes="0" data-reads="0" data-hash="7773dd1ba102166f738ead6d4a03b9ccf96272a6b81d836110920f7a2f304dde" data-astro-cid-bvzihdzo></div>  <script type="module" src="/_astro/BlogPost.astro_astro_type_script_index_1_lang.BtOU-HKl.js"></script> </body> </html>